<div class="container" tabindex="0" (keydown)="onKeyPress($event)"
     (click)="stageClick($event)" (mousemove)="onMouseMove" (mouseleave)="onMouseLeave">
    <div #viewport class="viewport"
         [style.width.px]="page.width + holderWidth"
         [style.height.px]="page.height + holderHeight">
        <div #canvas class="canvas"
             [style.left.px]="holderWidth/2"
             [style.top.px]="holderHeight/2"
             [style.width.px]="page.width"
             [style.height.px]="page.height"
             [style.background-color]="page.color"
             [style.background-image]="page.imageUrl"
             [style.background-size]="page.fit.sizeCss"
             [style.background-repeat]="page.fit.repeatCss">
            <template ngFor let-item [ngForOf]="page.items">
                <template [ngIf]="item.type == PageItemType.text">
                    <text-item class="page-item" [item]="item" (click)="onItemClick($event, item)"></text-item>
                </template>
                <template [ngIf]="item.type == PageItemType.image">
                    <image-item class="page-item" [item]="item" (click)="onItemClick($event, item)"></image-item>
                </template>
                <template [ngIf]="item.type == PageItemType.video">
                    <video-item class="page-item" [item]="item" (click)="onItemClick($event, item)"></video-item>
                </template>
                <template [ngIf]="item.type == PageItemType.clock">
                    <clock-item class="page-item" [item]="item" (click)="onItemClick($event, item)"></clock-item>
                </template>
                <template [ngIf]="item.type == PageItemType.weather">
                    <weather-item class="page-item" [item]="item" (click)="onItemClick($event, item)"></weather-item>
                </template>
                <template [ngIf]="item.type == PageItemType.widget">
                    <widget-item class="page-item" [item]="item" (click)="onItemClick($event, item)"></widget-item>
                </template>
                <template [ngIf]="item.type == PageItemType.scroller">
                    <scroller-item class="page-item" [item]="item" (click)="onItemClick($event, item)"></scroller-item>
                </template>
            </template>
        </div>
        <div class="handle-holder"
             [style.left.px]="holderWidth/2"
             [style.top.px]="holderHeight/2"
             [style.width.px]="page.width"
             [style.height.px]="page.height">
            <!--<div class="handle-container">-->
                <template [ngIf]="selectedRect != null">
                    <div class="selected-box"
                         [style.left.px]="selectedRect.left"
                         [style.top.px]="selectedRect.top"
                         [style.width.px]="selectedRect.width"
                         [style.height.px]="selectedRect.height">
                        <div class="mover" (mousedown)="onMoveStart($event)"></div>
                        <div class="h-sizer" (mousedown)="onHResizeStart($event)"></div>
                        <div class="v-sizer" (mousedown)="onVResizeStart($event)"></div>
                    </div>
                </template>
            <!--</div>-->
        </div>
    </div>
</div>